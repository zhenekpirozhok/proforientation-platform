openapi: 3.1.0
info:
  title: Quiz API
  version: "1.0"
servers:
- url: http://localhost:8082
  description: Generated server url
security:
- bearerAuth: []
- locale: []
tags:
- name: Question
  description: CRUD operations for questions
- name: Quiz
  description: CRUD operations for quizzes
- name: Option
  description: CRUD operations for options
- name: Trait
  description: CRUD operations for traits
- name: Profession
  description: CRUD operations for profession
- name: Attempt
  description: Track user's quiz progress
- name: Authentication
  description: Authentication operations
- name: Translation
  description: CRUD operations for translations
- name: Import
  description: CSV data import operations
- name: Option Trait
  description: Assign/Update traits operations
- name: Export
  description: Data export operations (CSV / Excel)
- name: Quiz Metrics
  description: Get metrics for quizzes
- name: Profession Category
  description: CRUD operations for profession categories
- name: User
  description: Get users operations
paths:
  /translations/{id}:
    put:
      tags:
      - Translation
      summary: Update translation
      description: Updates the text of an existing translation
      operationId: update
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateTranslationRequest"
        required: true
      responses:
        "200":
          description: Translation updated successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/TranslationDto"
        "400":
          description: Invalid request
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
        "403":
          description: Access denied (ADMIN role required)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
    delete:
      tags:
      - Translation
      summary: Delete translation
      description: Deletes a translation by its identifier
      operationId: delete
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "204":
          description: Translation deleted successfully
        "403":
          description: Access denied (ADMIN role required)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /traits/{id}:
    get:
      tags:
      - Trait
      summary: Get trait by ID
      description: Returns a single trait localized according to the current request
        locale
      operationId: getById
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Trait found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TraitDto"
        "404":
          description: Trait not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
    put:
      tags:
      - Trait
      summary: Update trait
      description: Updates an existing trait (ADMIN only)
      operationId: update_1
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTraitRequest"
        required: true
      responses:
        "200":
          description: Trait updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TraitDto"
        "403":
          description: Access denied (ADMIN role required)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
        "404":
          description: Trait not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
    delete:
      tags:
      - Trait
      summary: Delete trait
      description: Deletes a trait by its ID (ADMIN only)
      operationId: delete_1
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "204":
          description: Trait deleted successfully
        "403":
          description: Access denied (ADMIN role required)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /quizzes/{id}:
    get:
      tags:
      - Quiz
      summary: Get quiz by ID
      description: Returns a single quiz localized according to the current request
        locale
      operationId: getById_1
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Quiz found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuizDto"
        "404":
          description: Quiz not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
    put:
      tags:
      - Quiz
      summary: Update quiz
      description: Updates an existing quiz (ADMIN only)
      operationId: update_2
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateQuizRequest"
        required: true
      responses:
        "200":
          description: Quiz updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuizDto"
        "404":
          description: Quiz not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
        "403":
          description: Access denied
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
    delete:
      tags:
      - Quiz
      summary: Delete quiz
      description: Deletes a quiz by its ID (ADMIN only)
      operationId: delete_2
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "204":
          description: Quiz deleted
        "403":
          description: Access denied
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /questions/{id}:
    put:
      tags:
      - Question
      summary: Update a question
      description: "Updates question text, type, or order. Only administrators are\
        \ allowed."
      operationId: update_3
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateQuestionRequest"
        required: true
      responses:
        "200":
          description: Question updated
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuestionDto"
        "400":
          description: Validation error
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuestionDto"
        "403":
          description: Forbidden
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuestionDto"
        "404":
          description: Question not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuestionDto"
    delete:
      tags:
      - Question
      summary: Delete a question
      description: Deletes a question by ID. Only administrators are allowed.
      operationId: delete_3
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Question deleted
        "403":
          description: Forbidden
        "404":
          description: Question not found
  /questions/{id}/order/{ord}:
    put:
      tags:
      - Question
      summary: Update question order
      description: Changes the display order of a question within a quiz version.
      operationId: updateOrder
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: ord
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Order updated
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuestionDto"
        "403":
          description: Forbidden
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuestionDto"
        "404":
          description: Question not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuestionDto"
  /professions/{id}:
    get:
      tags:
      - Profession
      summary: Get profession by ID
      description: Returns a single profession by its ID with localized fields.
      operationId: getById_2
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Profession found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionDto"
        "404":
          description: Profession not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionDto"
    put:
      tags:
      - Profession
      summary: Update a profession
      description: Updates an existing profession. Only administrators are allowed.
      operationId: update_4
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProfessionRequest"
        required: true
      responses:
        "200":
          description: Profession updated
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionDto"
        "400":
          description: Validation error
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionDto"
        "403":
          description: Forbidden
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionDto"
        "404":
          description: Profession not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionDto"
    delete:
      tags:
      - Profession
      summary: Delete a profession
      description: Deletes a profession by ID. Only administrators are allowed.
      operationId: delete_4
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Profession deleted
        "403":
          description: Forbidden
        "404":
          description: Profession not found
  /options/{optionId}/traits:
    put:
      tags:
      - Option Trait
      summary: Update traits for an option
      description: |
        Updates the list of traits associated with a specific option.
        Traits not present in the request will be removed.
        Accessible only to administrators.
      operationId: updateTraits
      parameters:
      - name: optionId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OptionTraitListRequest"
        required: true
      responses:
        "200":
          description: Traits successfully updated
        "400":
          description: Invalid request payload
        "403":
          description: Forbidden
        "404":
          description: Option not found
    post:
      tags:
      - Option Trait
      summary: Assign traits to an option
      description: |
        Assigns a list of traits with weights to a specific option.
        Existing trait assignments (if any) will be replaced.
        Accessible only to administrators.
      operationId: assignTraits
      parameters:
      - name: optionId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OptionTraitListRequest"
        required: true
      responses:
        "200":
          description: Traits successfully assigned
        "400":
          description: Invalid request payload
        "403":
          description: Forbidden
        "404":
          description: Option not found
  /options/{id}:
    put:
      tags:
      - Option
      summary: Update an option
      description: |
        Updates an existing answer option.
        Only administrators can modify options.
      operationId: update_5
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateOptionRequest"
        required: true
      responses:
        "200":
          description: Option updated
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/OptionDto"
        "400":
          description: Validation error
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
        "404":
          description: Option not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/OptionDto"
        "403":
          description: Forbidden
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/OptionDto"
    delete:
      tags:
      - Option
      summary: Delete an option
      description: |
        Deletes an answer option permanently.
        This operation cannot be undone.
      operationId: delete_5
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Option deleted
        "404":
          description: Option not found
        "403":
          description: Forbidden
  /options/{id}/order/{ord}:
    put:
      tags:
      - Option
      summary: Update option order
      description: |
        Updates the display order of an option within a question.
        Order must be a non-negative integer.
      operationId: updateOrder_1
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: ord
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Option order updated
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/OptionDto"
        "400":
          description: Invalid order value
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/OptionDto"
        "404":
          description: Option not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/OptionDto"
        "403":
          description: Forbidden
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/OptionDto"
  /categories/{id}:
    put:
      tags:
      - Profession Category
      summary: Update a profession category
      description: Updates an existing profession category by ID. Accessible only
        to administrators.
      operationId: update_6
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCategoryRequest"
        required: true
      responses:
        "200":
          description: Category updated
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionCategoryDto"
        "400":
          description: Validation error
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionCategoryDto"
        "403":
          description: Forbidden
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionCategoryDto"
        "404":
          description: Category not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionCategoryDto"
    delete:
      tags:
      - Profession Category
      summary: Delete a profession category
      description: Deletes a profession category by ID. Accessible only to administrators.
      operationId: delete_6
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Category deleted
        "403":
          description: Forbidden
        "404":
          description: Category not found
  /translations:
    get:
      tags:
      - Translation
      summary: Search translations
      description: "Returns translations for a given entity, entity ID, and locale"
      operationId: search
      parameters:
      - name: entityType
        in: query
        required: true
        schema:
          type: string
      - name: entityId
        in: query
        required: true
        schema:
          type: integer
          format: int32
      - name: locale
        in: query
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Translations found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TranslationDto"
        "400":
          description: Invalid request parameters
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
    post:
      tags:
      - Translation
      summary: Create translation
      description: Creates a new translation entry for a specific entity field and
        locale
      operationId: create
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTranslationRequest"
        required: true
      responses:
        "200":
          description: Translation created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TranslationDto"
        "400":
          description: Validation error
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
              example:
                code: 400
                time: 2025-05-20T15:00:00Z
                message:
                  locale: "locale must be a valid language code (e.g., en, en-US)"
        "403":
          description: Access denied (ADMIN role required)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /traits:
    get:
      tags:
      - Trait
      summary: Get all traits
      description: Returns all traits localized according to the current request locale
      operationId: getAll
      responses:
        "200":
          description: List of traits
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TraitDto"
    post:
      tags:
      - Trait
      summary: Create trait
      description: Creates a new trait (ADMIN only)
      operationId: create_1
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTraitRequest"
        required: true
      responses:
        "200":
          description: Trait created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TraitDto"
        "403":
          description: Access denied (ADMIN role required)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
        "400":
          description: Invalid request payload
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /quizzes:
    get:
      tags:
      - Quiz
      summary: Get all quizzes (paginated)
      description: |
        Returns a paginated list of quizzes localized according to the current request locale.

        Pagination is supported via standard Spring Data parameters:
        - `page` (default: 1)
        - `size` (number of items per page, default: 20)
        - `sort` (sorting criteria, e.g. `id,asc` or `title,desc`)

        Example:
        `/quizzes?page=0&size=10&sort=title,asc`
      operationId: getAll_1
      parameters:
      - name: page
        in: query
        description: Page number
        required: false
        schema:
          type: string
      - name: size
        in: query
        description: Number of items per page
        required: false
        schema:
          type: string
      - name: sort
        in: query
        description: Sort by field
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Page of quizzes
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuizDto"
    post:
      tags:
      - Quiz
      summary: Create quiz
      description: Creates a new quiz (ADMIN only)
      operationId: create_2
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateQuizRequest"
        required: true
      responses:
        "200":
          description: Quiz created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuizDto"
        "400":
          description: Invalid request payload
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
        "403":
          description: Access denied
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /quizzes/my:
    get:
      tags:
      - Quiz
      summary: Get quizzes created by current admin (paginated)
      description: |
        Returns a paginated list of quizzes created by the current authenticated admin.

        Pagination is supported via standard Spring Data parameters:
        - `page` (default: 1)
        - `size` (number of items per page, default: 20)
        - `sort` (sorting criteria, e.g. `id,asc` or `title,desc`)

        Example:
        `/quizzes/my?page=0&size=10&sort=title,asc`
      operationId: getAdminQuizzes
      parameters:
      - name: page
        in: query
        description: Page number
        required: false
        schema:
          type: string
      - name: size
        in: query
        description: Number of items per page
        required: false
        schema:
          type: string
      - name: sort
        in: query
        description: Sort by field
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Page of admin's quizzes
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuizDto"
        "401":
          description: Unauthorized - authentication required
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
        "403":
          description: Access denied - admin role required
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /quizzes/{id}/publish:
    post:
      tags:
      - Quiz
      summary: Publish quiz
      description: Publishes a quiz and creates a new current quiz version (ADMIN
        only)
      operationId: publish
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Quiz published
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuizVersionDto"
  /quizzes/{id}/copy:
    post:
      tags:
      - Quiz
      summary: Copy latest quiz version
      description: Creates a new draft version by copying the latest version (ADMIN
        only)
      operationId: copyLatest
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Quiz version copied
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuizVersionDto"
  /questions:
    post:
      tags:
      - Question
      summary: Create a question
      description: Creates a new question for a quiz version. Only administrators
        are allowed.
      operationId: create_3
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateQuestionRequest"
        required: true
      responses:
        "200":
          description: Question successfully created
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuestionDto"
        "400":
          description: Validation error
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuestionDto"
        "403":
          description: Forbidden
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuestionDto"
  /professions:
    get:
      tags:
      - Profession
      summary: Get all professions (paginated)
      description: |
        Returns a paginated list of professions with localized fields.

        Pagination parameters:
        - `page` (0-based index, default: 0)
        - `size` (page size, default: 20)
        - `sort` (sorting field, default: id)

        Example:
        `/professions?page=0&size=10&sort=id,asc`
      operationId: getAll_2
      parameters:
      - name: page
        in: query
        description: Page number
        required: false
        schema:
          type: string
      - name: size
        in: query
        description: Number of items per page
        required: false
        schema:
          type: string
      - name: sort
        in: query
        description: Sort by field
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Page of professions
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionDto"
    post:
      tags:
      - Profession
      summary: Create a profession
      description: Creates a new profession. Only administrators are allowed.
      operationId: create_4
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProfessionRequest"
        required: true
      responses:
        "200":
          description: Profession created
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionDto"
        "400":
          description: Validation error
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionDto"
        "403":
          description: Forbidden
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionDto"
  /options:
    post:
      tags:
      - Option
      summary: Create an answer option
      description: |
        Creates a new answer option for a question.
        Only administrators are allowed to perform this operation.
      operationId: create_5
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateOptionRequest"
        required: true
      responses:
        "200":
          description: Option successfully created
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/OptionDto"
        "400":
          description: Validation error
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
        "403":
          description: Forbidden
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/OptionDto"
  /categories:
    get:
      tags:
      - Profession Category
      summary: Get all profession categories
      description: Returns a list of all profession categories.
      operationId: getAll_3
      responses:
        "200":
          description: List of profession categories
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionCategoryDto"
    post:
      tags:
      - Profession Category
      summary: Create a profession category
      description: Creates a new profession category. Accessible only to administrators.
      operationId: create_6
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCategoryRequest"
        required: true
      responses:
        "200":
          description: Category created
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionCategoryDto"
        "400":
          description: Validation error
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionCategoryDto"
        "403":
          description: Forbidden
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ProfessionCategoryDto"
  /auth/signup:
    post:
      tags:
      - Authentication
      summary: Register a new user
      description: Creates a new user account using email and password.
      operationId: register
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterUserDto"
        required: true
      responses:
        "200":
          description: User successfully registered
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: Validation error
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /auth/reset-password:
    post:
      tags:
      - Authentication
      summary: Reset password
      description: Resets a user's password using a valid reset token.
      operationId: resetPassword
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResetPasswordDto"
        required: true
      responses:
        "200":
          description: Password reset successful
          content:
            '*/*':
              schema:
                type: object
        "400":
          description: Invalid or expired token
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /auth/request-password-reset:
    post:
      tags:
      - Authentication
      summary: Request password reset
      description: Sends a password reset link to the user's email address if it exists.
      operationId: requestReset
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RequestResetPasswordDto"
        required: true
      responses:
        "200":
          description: Reset link sent (if email exists)
          content:
            '*/*':
              schema:
                type: object
  /auth/refresh:
    post:
      tags:
      - Authentication
      summary: Refresh access token
      description: Generates a new access token using a valid refresh token.
      operationId: refreshToken
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefreshTokenRequest"
        required: true
      responses:
        "200":
          description: Token refreshed
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/LoginResponse"
        "401":
          description: Invalid or expired refresh token
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/LoginResponse"
  /auth/logout:
    post:
      tags:
      - Authentication
      summary: Logout user
      description: Invalidates the current JWT token by blacklisting it. The user
        must be authenticated.
      operationId: logout
      parameters:
      - name: Authorization
        in: header
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Successfully logged out
          content:
            '*/*':
              schema:
                type: object
        "400":
          description: Missing or invalid Authorization header
          content:
            '*/*':
              schema:
                type: object
        "401":
          description: Unauthorized
          content:
            '*/*':
              schema:
                type: object
  /auth/login:
    post:
      tags:
      - Authentication
      summary: Authenticate user
      description: Authenticates a user and returns JWT access and refresh tokens.
      operationId: authenticate
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginUserDto"
        required: true
      responses:
        "200":
          description: Authentication successful
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/LoginResponse"
        "401":
          description: Invalid credentials
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /auth/google-onetap:
    post:
      tags:
      - Authentication
      summary: Google One Tap login
      description: Authenticates a user using Google One Tap ID token.
      operationId: handleGoogleOneTap
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GoogleOneTapLoginRequest"
        required: true
      responses:
        "200":
          description: Authentication successful
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/LoginResponse"
        "401":
          description: Invalid Google token
          content:
            '*/*':
              schema:
                type: object
  /attempts/{attemptId}/submit:
    post:
      tags:
      - Attempt
      summary: Submit attempt
      description: |
        Finalizes an attempt and triggers scoring logic.

        - Calculates trait scores
        - Calls external ML service
        - Produces profession recommendations
      operationId: submit
      parameters:
      - name: attemptId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Attempt successfully submitted and scored
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/AttemptResultDto"
        "400":
          description: Attempt already submitted or incomplete
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /attempts/{attemptId}/answers:
    post:
      tags:
      - Attempt
      summary: Submit a single answer
      description: Adds a single answer to an active attempt.
      operationId: addAnswer
      parameters:
      - name: attemptId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AddAnswerRequest"
        required: true
      responses:
        "200":
          description: Answer added successfully
        "400":
          description: Attempt already submitted or invalid option
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /attempts/{attemptId}/answers/question:
    post:
      tags:
      - Attempt
      summary: Submit answers for one question (single or multi-select)
      description: |
        Overwrites answers for one specific question inside an active attempt.

        - Useful for multi-select questions (checkboxes)
        - Also works for single-choice (send one optionId)
        - Does NOT delete answers for other questions
      operationId: addAnswersForQuestion
      parameters:
      - name: attemptId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AddAnswersForQuestionRequest"
        required: true
      responses:
        "200":
          description: Answers saved for the question
        "400":
          description: Invalid attempt state or invalid option/question mapping
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /attempts/{attemptId}/answers/bulk:
    post:
      tags:
      - Attempt
      summary: Submit multiple answers at once
      description: Adds multiple answers to an active attempt in a single request.
      operationId: addAnswersBulk
      parameters:
      - name: attemptId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AddAnswersBulkRequest"
        required: true
      responses:
        "200":
          description: Answers added successfully
        "400":
          description: Invalid request or attempt state
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /attempts/start:
    post:
      tags:
      - Attempt
      summary: Start a quiz attempt
      description: |
        Starts a new quiz attempt for a given quiz version.

        - If the user is authenticated, the attempt is linked to the user
        - If the user is anonymous, a guest token is generated and returned
      operationId: startAttempt
      parameters:
      - name: quizVersionId
        in: query
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Attempt successfully started
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/AttemptStartResponse"
        "400":
          description: Invalid quiz version
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /api/import/excel/translations:
    post:
      tags:
      - Import
      summary: Import translations from Excel
      description: |
        Imports translations from an Excel (.xlsx) file.

        The file must contain a header row with the following columns:
        - entity_type (quiz, question, option, profession)
        - entity_id
        - field (e.g. title, description)
        - locale (e.g. en, uk)
        - text

        Import behavior:
        - All rows are validated before saving
        - Invalid rows are skipped
        - Errors are returned with row numbers and messages
        - Valid rows are saved in a single transaction
      operationId: importTranslationsExcel
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
              required:
              - file
      responses:
        "200":
          description: Translations imported successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ImportResultDto"
        "400":
          description: Invalid Excel file or validation errors
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ImportResultDto"
        "403":
          description: Access denied (admin only)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ImportResultDto"
  /api/import/excel/quizzes:
    post:
      tags:
      - Import
      summary: Import quizzes from Excel
      description: |
        Imports quizzes from an Excel (.xlsx) file.

        Required columns:
        - code
        - title_default
        - category_id
        - author_id

        Optional columns:
        - status (DRAFT, PUBLISHED)
        - processing_mode (LLM, ML_RIASEC, etc.)
        - description_default
        - seconds_per_question_default

        Import behavior:
        - Existing quizzes are updated by code
        - New quizzes are created if code does not exist
        - Duplicate codes inside the file are rejected
        - If status is PUBLISHED and no quiz version exists,
          a published quiz version is created automatically
        - Invalid rows are skipped, valid rows are saved
      operationId: importQuizzesExcel
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
              required:
              - file
      responses:
        "200":
          description: Quizzes imported successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ImportResultDto"
        "400":
          description: Invalid Excel file or validation errors
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ImportResultDto"
        "403":
          description: Access denied (admin only)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ImportResultDto"
  /api/import/excel/professions:
    post:
      tags:
      - Import
      summary: Import professions from Excel
      description: |
        Imports professions from an Excel (.xlsx) file.

        Required columns:
        - code
        - title_default
        - category_id

        Optional columns:
        - description
        - ml_class_code

        Import behavior:
        - Existing professions are updated by code
        - New professions are created if code does not exist
        - Duplicate codes inside the file are rejected
        - Invalid rows are skipped, valid rows are saved
      operationId: importProfessionsExcel
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
              required:
              - file
      responses:
        "200":
          description: Professions imported successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ImportResultDto"
        "400":
          description: Invalid Excel file or validation errors
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ImportResultDto"
        "403":
          description: Access denied (admin only)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ImportResultDto"
  /api/import/admin/import/questions:
    post:
      tags:
      - Import
      summary: Import quiz questions from Excel
      description: |
        Imports quiz questions from an Excel (.xlsx) file.

        Required columns:
        - quiz_version_id
        - ord
        - qtype (SINGLE, MULTIPLE, SCALE, etc.)
        - text_default

        Import behavior:
        - Questions are linked to an existing quiz version
        - Invalid enum values or missing references are rejected
        - Invalid rows are skipped
        - Valid questions are saved
      operationId: importQuestions
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
              required:
              - file
      responses:
        "200":
          description: Questions imported successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ImportResultDto"
        "400":
          description: Invalid Excel file or validation errors
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ImportResultDto"
        "403":
          description: Access denied (admin only)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ImportResultDto"
  /users/{id}/role:
    patch:
      tags:
      - User
      summary: Update user role (admin only)
      description: |2
            Changes the role of a user.

            Notes:
            - Only admins can call this endpoint.
            - Request body is a plain string containing the new role.
            - Allowed values: USER, ADMIN
            - Typically you should prevent changing your own role in the service layer.
      operationId: updateUserRole
      parameters:
      - name: id
        in: path
        description: User ID
        required: true
        schema:
          type: integer
          format: int32
        example: 123
      requestBody:
        description: New role as plain string (USER or ADMIN)
        content:
          text/plain:
            schema:
              type: string
              enum:
              - USER
              - ADMIN
              example: ADMIN
        required: true
      responses:
        "204":
          description: User role updated successfully
        "400":
          description: Invalid role value
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
              example:
                code: 400
                time: 2025-05-20T14:52:00Z
                message: "Invalid role: SUPER_ADMIN"
        "403":
          description: Access denied (admin role required)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
              example:
                code: 403
                time: 2025-05-20T14:52:00Z
                message: "Access denied: insufficient permissions"
        "404":
          description: User not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
              example:
                code: 404
                time: 2025-05-20T14:52:00Z
                message: User not found
  /users:
    get:
      tags:
      - User
      summary: Get all users (admin only)
      description: |2
            Returns a paginated list of users.

            Pagination parameters:
            - page: page number (0-based)
            - size: page size
            - sort: sorting criteria (e.g. id,asc)
      operationId: allUsers
      parameters:
      - name: page
        in: query
        description: Page number
        required: false
        schema:
          type: string
      - name: size
        in: query
        description: Number of items per page
        required: false
        schema:
          type: string
      - name: sort
        in: query
        description: Sort by field
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Users retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Page"
        "403":
          description: Access denied (admin role required)
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
              example:
                code: 403
                time: 2025-05-20T14:52:00Z
                message: "Access denied: insufficient permissions"
  /users/me:
    get:
      tags:
      - User
      summary: Get current authenticated user
      description: Returns the profile of the currently authenticated user
      operationId: authenticatedUser
      responses:
        "200":
          description: Authenticated user returned successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "401":
          description: User is not authenticated
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
              example:
                code: 401
                time: 2025-05-20T14:50:00Z
                message: Unauthorized
        "403":
          description: Authenticated but insufficient permissions
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
              example:
                code: 403
                time: 2025-05-20T14:50:10Z
                message: "Access denied: insufficient permissions"
  /translations/entity/{entityType}:
    get:
      tags:
      - Translation
      summary: Get all translations for entity type
      description: Returns all translations for a given entity type across all locales
      operationId: getAllForEntityType
      parameters:
      - name: entityType
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Translations returned successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TranslationDto"
  /quizzes/{id}/versions:
    get:
      tags:
      - Quiz
      summary: Get quiz versions
      description: Returns all versions of a quiz
      operationId: getVersions
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: List of quiz versions
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuizVersionDto"
  /quizzes/{id}/versions/{version}:
    get:
      tags:
      - Quiz
      summary: Get specific quiz version
      description: Returns a specific version of a quiz by version number
      operationId: getVersion
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: version
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Quiz version found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuizVersionDto"
        "404":
          description: Quiz version not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /quizzes/{id}/versions/current:
    get:
      tags:
      - Quiz
      summary: Get current quiz version
      description: Returns the currently published quiz version
      operationId: getCurrentVersion
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Current quiz version
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuizVersionDto"
  /quizzes/search:
    get:
      tags:
      - Quiz
      summary: Search and filter quizzes
      description: "Search quizzes by title, code, or description and filter by category\
        \ or duration time. Supports pagination and localization."
      operationId: search_1
      parameters:
      - name: search
        in: query
        description: "Search text (title, code or description)"
        required: false
        schema:
          type: string
        example: career
      - name: categoryId
        in: query
        description: Profession category ID
        required: false
        schema:
          type: integer
          format: int32
        example: 1
      - name: minDurationSec
        in: query
        description: Minimum estimated duration in seconds
        required: false
        schema:
          type: integer
          format: int32
        example: 300
      - name: maxDurationSec
        in: query
        description: Maximum estimated duration in seconds
        required: false
        schema:
          type: integer
          format: int32
        example: 1200
      - name: page
        in: query
        description: Page number
        required: false
        schema:
          type: string
      - name: size
        in: query
        description: Number of items per page
        required: false
        schema:
          type: string
      - name: sort
        in: query
        description: Sort by field
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Quizzes found
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/QuizDto"
        "404":
          description: No quizzes found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /quizzes/code/{code}:
    get:
      tags:
      - Quiz
      summary: Get quiz by code
      description: Returns a single quiz localized according to the current request
        locale
      operationId: getByCode
      parameters:
      - name: code
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Quiz found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuizDto"
        "404":
          description: Quiz not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /questions/{questionId}/options:
    get:
      tags:
      - Question
      summary: Get options for a question
      description: |
        Returns all answer options for a specific question.
        Option labels are localized according to the request locale.
      operationId: getOptionsForQuestion
      parameters:
      - name: questionId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: List of options for the question
          content:
            application/json:
              schema:
                type: array
                $ref: "#/components/schemas/OptionDto"
        "404":
          description: Question not found
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/OptionDto"
  /questions/quiz/{quizId}:
    get:
      tags:
      - Question
      summary: Get questions for current quiz version (paginated)
      description: |
        Returns questions for the current published version of a quiz.

        Pagination parameters:
        - `page` (0-based index, default: 0)
        - `size` (page size, default: 20)
        - `sort` (sorting field, default: ord)

        Example:
        `/questions/quiz/5?page=0&size=10&sort=ord,asc`
      operationId: getQuestionsForQuiz
      parameters:
      - name: quizId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: page
        in: query
        description: Page number
        required: false
        schema:
          type: string
      - name: size
        in: query
        description: Number of items per page
        required: false
        schema:
          type: string
      - name: sort
        in: query
        description: Sort by field
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Page of questions
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuestionDto"
  /questions/quiz/{quizId}/version/{version}:
    get:
      tags:
      - Question
      summary: Get questions for a specific quiz version (paginated)
      description: |
        Returns questions for a specific quiz version.

        Pagination parameters:
        - `page` (0-based index)
        - `size` (page size)
        - `sort` (sorting field)

        Example:
        `/questions/quiz/5/version/2?page=1&size=10`
      operationId: getQuestionsForQuizVersion
      parameters:
      - name: quizId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: version
        in: path
        required: true
        schema:
          type: integer
          format: int32
      - name: page
        in: query
        description: Page number
        required: false
        schema:
          type: string
      - name: size
        in: query
        description: Number of items per page
        required: false
        schema:
          type: string
      - name: sort
        in: query
        description: Sort by field
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Page of questions
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuestionDto"
        "404":
          description: Quiz version not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/PageQuestionDto"
  /professions/search:
    get:
      tags:
      - Profession
      summary: Search professions
      description: |2
            Searches professions using text and filters.

            Search capabilities:
            - Text search by title, description, code, or ML class code
            - Optional filtering by profession category
            - Supports pagination and sorting
      operationId: search_2
      parameters:
      - name: q
        in: query
        required: false
        schema:
          type: string
          default: ""
      - name: categoryId
        in: query
        required: false
        schema:
          type: integer
          format: int32
      - name: page
        in: query
        required: false
        schema:
          type: integer
          format: int32
          default: 1
      - name: size
        in: query
        required: false
        schema:
          type: integer
          format: int32
          default: 20
      - name: sort
        in: query
        required: false
        schema:
          type: string
          default: id
      responses:
        "200":
          description: Professions retrieved successfully
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/PageProfessionDto"
        "400":
          description: Invalid search parameters
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/PageProfessionDto"
  /attempts:
    get:
      tags:
      - Attempt
      summary: Get user's attempts
      description: |
        Returns all attempts for the current user.

        - Authenticated users: attempts linked to user account
        - Guest users: attempts linked via guest token
      operationId: myAttempts
      parameters:
      - name: guestToken
        in: query
        required: false
        schema:
          type: string
      responses:
        "200":
          description: List of attempt summaries
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/AttemptSummaryDto"
  /attempts/{id}/result:
    get:
      tags:
      - Attempt
      summary: Get attempt result
      description: Returns final scoring results and recommendations for a submitted
        attempt.
      operationId: getResult
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: Attempt result
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/AttemptResultDto"
        "404":
          description: Attempt not found
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /attempts/search:
    get:
      tags:
      - Attempt
      summary: Admin search attempts
      description: |
        Administrative search over attempts.

        Supports filtering by:
        - user
        - quiz
        - date range
      operationId: search_3
      parameters:
      - name: userId
        in: query
        required: false
        schema:
          type: integer
          format: int32
      - name: quizId
        in: query
        required: false
        schema:
          type: integer
          format: int32
      - name: from
        in: query
        required: false
        schema:
          type: string
          format: date-time
      - name: to
        in: query
        required: false
        schema:
          type: string
          format: date-time
      responses:
        "200":
          description: Filtered list of attempts
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/AttemptSummaryDto"
        "403":
          description: Access denied
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /api/v1/quizzes/metrics:
    get:
      tags:
      - Quiz Metrics
      summary: Get all public quiz metrics
      description: "Returns public analytics for all quizzes without filtering. Includes\
        \ attempts count, average duration, and estimated duration."
      operationId: getAllMetrics
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/QuizPublicMetricsDto"
  /api/v1/quizzes/metrics/{quizId}:
    get:
      tags:
      - Quiz Metrics
      summary: Get public metrics for a specific quiz
      description: Returns aggregated public metrics for a single quiz identified
        by its ID. Throws 404 if the quiz metrics are not found.
      operationId: getMetrics
      parameters:
      - name: quizId
        in: path
        required: true
        schema:
          type: integer
          format: int32
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/QuizPublicMetricsDto"
  /api/v1/quizzes/metrics/filter:
    get:
      tags:
      - Quiz Metrics
      summary: Filter public quiz metrics
      description: |
        Returns public quiz metrics filtered by the provided criteria.

        All parameters are optional. If multiple filters are provided,
        they are combined using logical AND.

        Typical use cases:
        - Admin analytics dashboards
        - Exporting filtered analytics
        - Monitoring quiz performance
      operationId: filterMetrics
      parameters:
      - name: filter
        in: query
        description: Filter criteria for quiz metrics
        required: true
        schema:
          $ref: "#/components/schemas/QuizMetricsFilter"
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/QuizPublicMetricsDto"
  /api/export/quiz-metrics/export:
    get:
      tags:
      - Export
      summary: Export quiz metrics to CSV
      description: Exports quiz public metrics filtered by query parameters. All filters
        are optional.
      operationId: exportQuizMetricsCsv
      parameters:
      - name: filter
        in: query
        required: true
        schema:
          $ref: "#/components/schemas/QuizMetricsFilter"
      responses:
        "200":
          description: OK
          content:
            text/csv:
              schema:
                type: string
                format: byte
  /api/export/quiz-metrics/export.xlsx:
    get:
      tags:
      - Export
      summary: Export quiz metrics to Excel (XLSX)
      description: Exports quiz public metrics filtered by query parameters. All filters
        are optional.
      operationId: exportQuizMetricsExcel
      parameters:
      - name: filter
        in: query
        required: true
        schema:
          $ref: "#/components/schemas/QuizMetricsFilter"
      responses:
        "200":
          description: OK
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: byte
  /api/export/excel:
    get:
      tags:
      - Export
      summary: Export all data to Excel
      description: |
        Exports all system data into a single Excel file.
        Each entity is exported into a separate sheet.
      operationId: exportExcel
      responses:
        "200":
          description: Excel file generated successfully
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet: {}
  /api/export/csv/{entity}:
    get:
      tags:
      - Export
      summary: Export entity to CSV
      description: |
        Exports the specified entity to a CSV file.
        Supported entities include quizzes, questions, options,
        professions, attempts, and translations.
      operationId: exportCsv
      parameters:
      - name: entity
        in: path
        description: Entity name to export
        required: true
        schema:
          type: string
          enum:
          - quizzes
          - quiz_versions
          - questions
          - question_options
          - professions
          - attempts
          - translations
        example: questions
      responses:
        "200":
          description: CSV file generated successfully
          content:
            text/csv: {}
        "400":
          description: Unsupported entity type
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
  /auth/account:
    delete:
      tags:
      - Authentication
      summary: Delete user account
      description: Deletes the authenticated user's account after password confirmation.
      operationId: deleteAccount
      parameters:
      - name: password
        in: query
        required: true
        schema:
          type: string
      responses:
        "204":
          description: Account deleted
        "401":
          description: Unauthorized
  /attempts/delete:
    delete:
      tags:
      - Attempt
      summary: Delete selected attempts (user confirmation required)
      description: |2
            Deletes one or more attempts belonging to the current user.

            Important notes:
            - This operation requires explicit confirmation from the client.
            - The frontend should show a confirmation dialog before calling this endpoint.
            - Attempts are removed only if they belong to the current user (or guest session).
            - Deletion is irreversible from the user's perspective.
      operationId: deleteMyAttempts
      parameters:
      - name: guestToken
        in: query
        required: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DeleteAttemptsRequest"
        required: true
      responses:
        "204":
          description: Attempts deleted successfully
        "400":
          description: Confirmation not provided or request is invalid
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
              example:
                code: 400
                time: 2025-05-20T14:52:00Z
                message: Confirmation required to delete attempts
        "404":
          description: One or more attempts not found or do not belong to the user
          content:
            '*/*':
              schema:
                $ref: "#/components/schemas/ExceptionDto"
              example:
                code: 404
                time: 2025-05-20T14:52:00Z
                message: Attempt not found
components:
  schemas:
    UpdateTranslationRequest:
      type: object
      description: Request payload for updating a localized translation value
      properties:
        text:
          type: string
          description: Updated translated text value
          examples:
          - Software Engineer
    TranslationDto:
      type: object
      description: Translation data transfer object
      properties:
        id:
          type: integer
          format: int32
          description: Unique translation identifier
          examples:
          - "1"
        entityType:
          type: string
          description: Type of the translated entity
          examples:
          - profession
        entityId:
          type: integer
          format: int32
          description: Identifier of the related entity
          examples:
          - "1"
        field:
          type: string
          description: Translated field name
          examples:
          - title
        locale:
          type: string
          description: Language code (ISO 639-1)
          examples:
          - en
        text:
          type: string
          description: Localized text value
          examples:
          - Software Engineer
    ExceptionDto:
      type: object
      description: Standardized API error response returned for all handled exceptions
      properties:
        code:
          type: integer
          format: int32
          description: HTTP status code representing the error type
          examples:
          - "400"
        time:
          type: string
          format: date-time
          description: Timestamp indicating when the error occurred (ISO-8601 format)
          examples:
          - 2025-01-15T14:32:10Z
        message:
          type: object
          description: |
            Error details. May be:
            - a string message (e.g. 'Invalid credentials')
            - a structured object containing validation errors
          examples:
          - Invalid email or password
          oneOf:
          - type: string
          - {}
    CreateTraitRequest:
      type: object
      description: Request payload for creating a psychological trait
      properties:
        code:
          type: string
          description: "Unique trait code (e.g. R, I, A)"
          examples:
          - R
        name:
          type: string
          description: Human-readable trait name
          examples:
          - Realistic
        description:
          type: string
          description: Description explaining the trait meaning
          examples:
          - "Preference for practical, hands-on activities"
        bipolarPairCode:
          type: string
          description: Code of the opposite trait in a bipolar pair
          examples:
          - S
    TraitDto:
      type: object
      description: Represents a psychological trait used in assessment scoring
      properties:
        id:
          type: integer
          format: int32
          description: Unique identifier of the trait
          examples:
          - "1"
        code:
          type: string
          description: Short code representing the trait (e.g. RIASEC dimension)
          examples:
          - R
        name:
          type: string
          description: Human-readable name of the trait
          examples:
          - Realistic
        description:
          type: string
          description: Detailed description of the trait
          examples:
          - Preference for hands-on activities and practical problem solving
        bipolarPairCode:
          type: string
          description: Code of the opposing trait in a bipolar pair
          examples:
          - S
    UpdateQuizRequest:
      type: object
      description: Request payload for updating quiz metadata
      properties:
        title:
          type: string
          description: Updated quiz title
          examples:
          - Software Engineering Career Quiz
        processingMode:
          type: string
          description: Updated quiz processing mode
          enum:
          - ML_RIASEC
          - LLM
          examples:
          - ML_RIASEC
        status:
          type: string
          description: Updated quiz status
          enum:
          - DRAFT
          - PUBLISHED
          - ARCHIVED
          examples:
          - PUBLISHED
        descriptionDefault:
          type: string
          description: Updated quiz description (default language)
          examples:
          - Updated description for the quiz.
        secondsPerQuestionDefault:
          type: integer
          format: int32
          description: Updated time limit per question in seconds
          examples:
          - "45"
        categoryId:
          type: integer
          format: int32
          description: Identifier of the new quiz category
          examples:
          - "4"
    QuizDto:
      type: object
      description: Represents a quiz definition and its metadata
      properties:
        id:
          type: integer
          format: int32
          description: Unique identifier of the quiz
          examples:
          - "1"
        code:
          type: string
          description: Short unique code used to reference the quiz
          examples:
          - riasec_main
        title:
          type: string
          description: Human-readable title of the quiz
          examples:
          - RIASEC Career Orientation Test
        status:
          type: string
          description: Current lifecycle status of the quiz
          enum:
          - PUBLISHED
          - DRAFT
          - ARCHIVED
          examples:
          - PUBLISHED
        processingMode:
          type: string
          description: Processing mode used to evaluate quiz results
          enum:
          - ML_RIASEC
          - LLM
          examples:
          - ML_RIASEC
        categoryId:
          type: integer
          format: int32
          description: Identifier of the category this quiz belongs to
          examples:
          - "5"
        authorId:
          type: integer
          format: int32
          description: Identifier of the user who authored the quiz
          examples:
          - "1"
        descriptionDefault:
          type: string
          description: Localized quiz description
          example: This quiz helps identify suitable career paths
        secondsPerQuestionDefault:
          type: integer
          format: int32
          description: Time limit per question in seconds
          example: 30
          minimum: 0
    UpdateQuestionRequest:
      type: object
      description: Request payload for updating a quiz question
      properties:
        ord:
          type: integer
          format: int32
          description: New display order of the question
          examples:
          - "5"
          minimum: 1
        qtype:
          type: string
          description: Updated question type
          enum:
          - SINGLE_CHOICE
          - MULTI_CHOICE
          - LIKER_SCALE_5
          - LIKER_SCALE_7
          examples:
          - SINGLE_CHOICE
        text:
          type: string
          description: Updated question text
          examples:
          - How interested are you in programming?
    OptionDto:
      type: object
      description: Represents a selectable option for a quiz question
      properties:
        id:
          type: integer
          format: int32
          description: Unique identifier of the option
          examples:
          - "54"
        questionId:
          type: integer
          format: int32
          description: Identifier of the question this option belongs to
          examples:
          - "7"
        ord:
          type: integer
          format: int32
          description: Order index of the option within the question (1-based)
          examples:
          - "1"
          minimum: 1
        label:
          type: string
          description: Text label shown to the user for this option
          examples:
          - Strongly agree
    QuestionDto:
      type: object
      description: Represents a question within a quiz version
      properties:
        id:
          type: integer
          format: int32
          description: Unique identifier of the question
          examples:
          - "101"
        quizVersionId:
          type: integer
          format: int32
          description: Identifier of the quiz version this question belongs to
          examples:
          - "1"
        ord:
          type: integer
          format: int32
          description: Order of the question within the quiz
          examples:
          - "3"
          minimum: 1
        qtype:
          type: string
          description: Type of question defining how the user should answer
          enum:
          - SINGLE_CHOICE
          - MULTI_CHOICE
          - LIKER_SCALE_5
          - LIKER_SCALE_7
          examples:
          - SINGLE_CHOICE
        text:
          type: string
          description: Text displayed to the user for this question
          examples:
          - I enjoy solving practical problems using my hands
        options:
          type: array
          description: List of selectable answer options for the question
          items:
            $ref: "#/components/schemas/OptionDto"
    CreateProfessionRequest:
      type: object
      description: Request payload for creating a new profession
      properties:
        code:
          type: string
          description: Unique profession code used internally
          examples:
          - software_engineer
        title:
          type: string
          description: Human-readable profession title
          examples:
          - Software Engineer
        description:
          type: string
          description: Detailed description of the profession
          examples:
          - "Designs, builds, and maintains software systems and applications."
        mlClassCode:
          type: string
          description: ML classification code returned by the ML model
          examples:
          - SE
        categoryId:
          type: integer
          format: int32
          description: Identifier of the profession category
          examples:
          - "3"
    ProfessionDto:
      type: object
      description: Represents a profession that can be recommended to users based
        on quiz results
      properties:
        id:
          type: integer
          format: int32
          description: Unique identifier of the profession
          examples:
          - "42"
        code:
          type: string
          description: Short internal code of the profession
          examples:
          - software_engineer
        title:
          type: string
          description: Human-readable title of the profession
          examples:
          - Software Engineer
        description:
          type: string
          description: "Detailed description of the profession, shown to end users"
          examples:
          - "Software engineers design, develop, and maintain software systems and\
            \ applications."
        mlClassCode:
          type: string
          description: Machine Learning class code used to map ML predictions to this
            profession
          examples:
          - SE
        categoryId:
          type: integer
          format: int32
          description: Identifier of the profession category
          examples:
          - "3"
    OptionTraitListRequest:
      type: object
      description: Request payload for assigning multiple trait weights to a question
        option
      properties:
        traits:
          type: array
          description: List of trait-weight associations for the option
          items:
            $ref: "#/components/schemas/OptionTraitRequest"
      required:
      - traits
    OptionTraitRequest:
      type: object
      description: Represents the association between an option and a trait with a
        weighted contribution
      properties:
        traitId:
          type: integer
          format: int32
          description: Identifier of the trait profile
          examples:
          - "3"
        weight:
          type: number
          description: |
            Weight applied to the trait when this option is selected.
            Can be positive or negative depending on scoring logic.
          examples:
          - "1.25"
      required:
      - traitId
      - weight
    UpdateOptionRequest:
      type: object
      description: Request payload for updating a quiz option
      properties:
        ord:
          type: integer
          format: int32
          description: New display order of the option
          examples:
          - "2"
          minimum: 1
        label:
          type: string
          description: Updated label text of the option
          examples:
          - Strongly agree
    CreateCategoryRequest:
      type: object
      description: Request payload for creating a new profession category
      properties:
        code:
          type: string
          description: Unique code of the category
          examples:
          - IT
        name:
          type: string
          description: Human-readable category name
          examples:
          - Information Technology
        colorCode:
          type: string
          description: Hex color code associated with the category (used in UI)
          examples:
          - "#1E90FF"
          pattern: "^#[0-9A-Fa-f]{6}$"
    ProfessionCategoryDto:
      type: object
      description: Represents a category used to group professions
      properties:
        id:
          type: integer
          format: int32
          description: Unique identifier of the profession category
          examples:
          - "5"
        code:
          type: string
          description: Short code identifying the category
          examples:
          - IT
        name:
          type: string
          description: Human-readable name of the category
          examples:
          - Information Technology
        colorCode:
          type: string
          description: Hex color code used for UI representation of the category
          examples:
          - "#FF8800"
          pattern: "^#[0-9A-Fa-f]{6}$"
    CreateTranslationRequest:
      type: object
      description: Request payload for creating or updating a translation
      properties:
        entityType:
          type: string
          description: Type of the translated entity
          examples:
          - profession
        entityId:
          type: integer
          format: int32
          description: Identifier of the entity being translated
          example: 15
        field:
          type: string
          description: Field of the entity to translate
          examples:
          - title
        locale:
          type: string
          description: Language or locale code
          examples:
          - en
          pattern: "^[a-zA-Z]{2,3}(-[a-zA-Z]{2,3})?$"
        text:
          type: string
          description: Translated text value
          examples:
          - Software Engineer
    CreateQuizRequest:
      type: object
      description: Request payload for creating a new quiz
      properties:
        code:
          type: string
          description: Unique quiz code used internally
          examples:
          - riasec_main
        title:
          type: string
          description: Human-readable quiz title
          examples:
          - Career Orientation Test (RIASEC)
        processingMode:
          type: string
          description: Processing mode defining how results are calculated
          enum:
          - ML_RIASEC
          - LLM
          examples:
          - ML_RIASEC
        status:
          type: string
          description: Quiz status
          enum:
          - DRAFT
          - PUBLISHED
          - ARCHIVED
          examples:
          - DRAFT
        descriptionDefault:
          type: string
          description: Quiz description (default language)
          examples:
          - This quiz helps determine suitable career paths.
        secondsPerQuestionDefault:
          type: integer
          format: int32
          default: "30"
          description: Time limit per question in seconds
          examples:
          - "30"
        categoryId:
          type: integer
          format: int32
          description: Identifier of the quiz category
          examples:
          - "2"
        authorId:
          type: integer
          format: int32
          description: Identifier of the quiz author (admin user)
          examples:
          - "1"
    QuizVersionDto:
      type: object
      description: Represents a specific published version of a quiz
      properties:
        id:
          type: integer
          format: int32
          description: Unique identifier of the quiz version
          examples:
          - "1"
        quizId:
          type: integer
          format: int32
          description: Identifier of the quiz this version belongs to
          examples:
          - "1"
        version:
          type: integer
          format: int32
          description: Sequential version number of the quiz
          examples:
          - "1"
        isCurrent:
          type: boolean
          description: Indicates whether this is the currently active quiz version
          examples:
          - "true"
        publishedAt:
          type: string
          format: date-time
          description: Timestamp when the quiz version was published
          examples:
          - 2025-01-10T12:30:00Z
    CreateQuestionRequest:
      type: object
      description: Request payload for creating a quiz question
      properties:
        quizVersionId:
          type: integer
          format: int32
          description: Identifier of the quiz version this question belongs to
          examples:
          - "1"
        ord:
          type: integer
          format: int32
          description: Order of the question within the quiz version
          examples:
          - "49"
          minimum: 1
        qtype:
          type: string
          description: "Type of the question (e.g. single_choice, multi_choice, liker_scale_5)"
          enum:
          - SINGLE_CHOICE
          - MULTI_CHOICE
          - LIKER_SCALE_5
          - LIKER_SCALE_7
          examples:
          - SINGLE_CHOICE
        text:
          type: string
          description: Question text shown to the user
          examples:
          - I enjoy solving complex technical problems.
    CreateOptionRequest:
      type: object
      description: Request payload for creating a new question option
      properties:
        questionId:
          type: integer
          format: int32
          description: Identifier of the question this option belongs to
          examples:
          - "101"
        ord:
          type: integer
          format: int32
          description: Display order of the option within the question
          examples:
          - "1"
          minimum: 1
        label:
          type: string
          description: Displayed label of the option
          examples:
          - Strongly agree
    RegisterUserDto:
      type: object
      description: Request payload for user registration
      properties:
        email:
          type: string
          description: User email address used for authentication
          examples:
          - user@example.com
          minLength: 1
        displayName:
          type: string
          description: Display name shown in the application UI
          examples:
          - John Doe
        password:
          type: string
          description: |
            User password.
            Must be at least 6 characters long and contain at least one numeric digit.
          examples:
          - pass123
          maxLength: 2147483647
          minLength: 6
          pattern: .*\d.*
      required:
      - email
      - password
    GrantedAuthority:
      type: object
      properties:
        authority:
          type: string
    User:
      type: object
      properties:
        id:
          type: integer
          format: int32
        email:
          type: string
        passwordHash:
          type: string
        displayName:
          type: string
        role:
          type: string
          enum:
          - USER
          - ADMIN
        createdAt:
          type: string
          format: date-time
        password:
          type: string
        username:
          type: string
        enabled:
          type: boolean
        active:
          type: boolean
        authorities:
          type: array
          items:
            $ref: "#/components/schemas/GrantedAuthority"
        accountNonExpired:
          type: boolean
        accountNonLocked:
          type: boolean
        credentialsNonExpired:
          type: boolean
    ResetPasswordDto:
      type: object
      description: Request payload for completing a password reset using a reset token
      properties:
        token:
          type: string
          description: Password reset token sent to the user's email
          examples:
          - eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.reset-token
        newPassword:
          type: string
          description: |
            New password for the user account.
            Must contain at least one numeric digit and be at least 6 characters long.
          examples:
          - NewPass123
          maxLength: 2147483647
          minLength: 6
          pattern: .*\d.*
      required:
      - newPassword
    RequestResetPasswordDto:
      type: object
      description: Request payload for initiating a password reset process
      properties:
        email:
          type: string
          description: Email address associated with the user account
          examples:
          - user@example.com
          minLength: 1
      required:
      - email
    RefreshTokenRequest:
      type: object
      description: Request payload used to refresh an expired access token
      properties:
        refreshToken:
          type: string
          description: Refresh token previously issued during authentication
          examples:
          - eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
      required:
      - refreshToken
    LoginResponse:
      type: object
      description: Response returned after successful authentication or token refresh
      properties:
        token:
          type: string
          description: JWT access token used to authorize API requests
          examples:
          - eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        refreshToken:
          type: string
          description: Refresh token used to obtain a new access token
          examples:
          - eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        expiresIn:
          type: integer
          format: int64
          description: Access token expiration time in seconds
          examples:
          - "3600"
    LoginUserDto:
      type: object
      description: Request payload used for authenticating a user
      properties:
        email:
          type: string
          description: Email address used for user authentication
          examples:
          - user1@example.com
          minLength: 1
        password:
          type: string
          description: User password (minimum 6 characters)
          examples:
          - pass123
          maxLength: 2147483647
          minLength: 6
        rememberMe:
          type: boolean
          default: "false"
          description: "If true, a long-lived refresh token will be issued"
          examples:
          - "false"
        guestToken:
          type: string
          description: Guest token used to attach anonymous quiz attempts after login
      required:
      - email
      - password
    GoogleOneTapLoginRequest:
      type: object
      description: Request payload for Google One Tap authentication
      properties:
        token:
          type: string
          description: Google ID token obtained from Google One Tap login
          examples:
          - eyJhbGciOiJSUzI1NiIsImtpZCI6Ij...
          minLength: 1
        guestToken:
          type: string
          description: Guest token used to attach anonymous quiz attempts after login
      required:
      - token
    AttemptResultDto:
      type: object
      description: Detailed result of a completed quiz attempt
      properties:
        traitScores:
          type: array
          description: |
            Calculated trait scores.
            The key represents the trait code, the value represents the score.
          examples:
          - |
            {
              "R": 12.5,
              "I": 9.0,
              "A": 7.5
            }
          items:
            $ref: "#/components/schemas/TraitScoreDto"
        recommendations:
          type: array
          description: List of recommended professions based on ML prediction
          examples:
          - |
            [
              {
                "professionId": 42,
                "score": 0.82,
                "explanation": "Predicted as: Software Engineer"
              }
            ]
          items:
            $ref: "#/components/schemas/RecommendationDto"
    RecommendationDto:
      type: object
      description: Career recommendation generated by the scoring engine
      properties:
        professionId:
          type: integer
          format: int32
          description: Identifier of the recommended profession
          examples:
          - "42"
        score:
          type: number
          description: Identifier of the recommended profession
          examples:
          - "42"
        explanation:
          type: string
          description: Human-readable explanation of why this profession was recommended
          examples:
          - "Predicted as: Software Engineer"
    TraitScoreDto:
      type: object
      description: Trait score entry
      properties:
        traitCode:
          type: string
          description: Short code representing the trait (e.g. RIASEC dimension)
          examples:
          - R
        score:
          type: number
          description: Probability score assigned by the ML model (range 0.0  1.0)
          examples:
          - "0.75"
    AddAnswerRequest:
      type: object
      description: Request payload for submitting a single answer to a quiz attempt
      properties:
        optionId:
          type: integer
          format: int32
          description: Identifier of the selected option
          examples:
          - "123"
      required:
      - optionId
    AddAnswersForQuestionRequest:
      type: object
      description: Submit selected optionIds for a single question (overwrites previous
        answers for that question)
      properties:
        questionId:
          type: integer
          format: int32
          description: Question id
          example: 10
        optionIds:
          type: array
          description: Selected option ids for this question
          example:
          - 100
          - 101
          items:
            type: integer
            format: int32
          minItems: 1
      required:
      - questionId
    AddAnswersBulkRequest:
      type: object
      description: Request payload for submitting multiple answers in a single operation
      properties:
        optionIds:
          type: array
          description: List of selected option IDs
          examples:
          - |-
            [
                                        1,6,11,16,21,26,31,36,
                                        41,46,51,56,61,66,71,76,
                                        81,86,91,96,101,106,111,116,
                                        121,126,131,136,141,146,151,156,
                                        161,166,171,176,181,186,191,196,
                                        201,206,211,216,221,226,231,236
                                      ]
          items:
            type: integer
            format: int32
          minItems: 1
      required:
      - optionIds
    AttemptStartResponse:
      type: object
      description: Response returned when a quiz attempt is started
      properties:
        attemptId:
          type: integer
          format: int32
          description: Unique identifier of the created attempt
          examples:
          - "123"
        guestToken:
          type: string
          description: |
            Guest access token used to continue the attempt without authentication.
            Null for authenticated users.
          examples:
          - f7c1a2e9-8a9d-4b2e-9b61-1a2f8c123abc
    ImportErrorDto:
      type: object
      description: Represents an error encountered during CSV import
      properties:
        rowNumber:
          type: integer
          format: int32
          description: Row number in the CSV where the error occurred
          example: 2
        field:
          type: string
          description: Field/column name causing the error
          example: quiz_version_id
        message:
          type: string
          description: Detailed error message
          example: Required field is missing
    ImportResultDto:
      type: object
      description: Represents the result of a CSV import operation
      properties:
        totalRows:
          type: integer
          format: int32
          description: Total number of rows read from the CSV file (excluding header)
          example: 10
        successCount:
          type: integer
          format: int32
          description: Number of rows successfully imported
          example: 8
        errors:
          type: array
          description: List of errors encountered during import
          items:
            $ref: "#/components/schemas/ImportErrorDto"
    Page:
      type: object
      properties:
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        content:
          type: array
          items:
            type: object
        number:
          type: integer
          format: int32
        sort:
          $ref: "#/components/schemas/SortObject"
        numberOfElements:
          type: integer
          format: int32
        pageable:
          $ref: "#/components/schemas/PageableObject"
        first:
          type: boolean
        last:
          type: boolean
        empty:
          type: boolean
    PageableObject:
      type: object
      properties:
        offset:
          type: integer
          format: int64
        sort:
          $ref: "#/components/schemas/SortObject"
        paged:
          type: boolean
        pageNumber:
          type: integer
          format: int32
        pageSize:
          type: integer
          format: int32
        unpaged:
          type: boolean
    SortObject:
      type: object
      properties:
        empty:
          type: boolean
        sorted:
          type: boolean
        unsorted:
          type: boolean
    PageQuestionDto:
      type: object
      properties:
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        content:
          type: array
          items:
            $ref: "#/components/schemas/QuestionDto"
        number:
          type: integer
          format: int32
        sort:
          $ref: "#/components/schemas/SortObject"
        numberOfElements:
          type: integer
          format: int32
        pageable:
          $ref: "#/components/schemas/PageableObject"
        first:
          type: boolean
        last:
          type: boolean
        empty:
          type: boolean
    PageProfessionDto:
      type: object
      properties:
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        content:
          type: array
          items:
            $ref: "#/components/schemas/ProfessionDto"
        number:
          type: integer
          format: int32
        sort:
          $ref: "#/components/schemas/SortObject"
        numberOfElements:
          type: integer
          format: int32
        pageable:
          $ref: "#/components/schemas/PageableObject"
        first:
          type: boolean
        last:
          type: boolean
        empty:
          type: boolean
    AttemptSummaryDto:
      type: object
      description: Summary information about a quiz attempt
      properties:
        id:
          type: integer
          format: int32
          description: Unique identifier of the attempt
          examples:
          - "101"
        quizVersionId:
          type: integer
          format: int32
          description: Identifier of the quiz version associated with this attempt
          examples:
          - "12"
        quizTitle:
          type: string
          description: Title of the quiz
          examples:
          - RIASEC Career Orientation Test
        status:
          type: string
          description: Current status of the attempt
          enum:
          - in_progress
          - completed
          examples:
          - in_progress
        startedAt:
          type: string
          format: date-time
          description: Timestamp when the attempt was started (ISO-8601)
          examples:
          - 2025-01-15T10:05:00Z
        submittedAt:
          type: string
          format: date-time
          description: "Timestamp when the attempt was submitted, null if not completed"
          examples:
          - 2025-01-15T10:20:30Z
        isCompleted:
          type: boolean
          description: Indicates whether the attempt has been completed
          examples:
          - "true"
    QuizPublicMetricsDto:
      type: object
      properties:
        quizId:
          type: integer
          format: int32
        quizCode:
          type: string
        quizStatus:
          type: string
        categoryId:
          type: integer
          format: int32
        questionsTotal:
          type: integer
          format: int32
        attemptsTotal:
          type: integer
          format: int32
        attemptsSubmitted:
          type: integer
          format: int32
        avgDurationSeconds:
          type: number
        estimatedDurationSeconds:
          type: integer
          format: int32
    QuizMetricsFilter:
      type: object
      properties:
        quizId:
          type: integer
          format: int32
          description: Exact quiz ID
        quizCodeContains:
          type: string
          description: Substring match for quiz code (case-insensitive)
          example: career
        quizStatus:
          type: string
          description: Quiz status
          enum:
          - DRAFT
          - PUBLISHED
          - ARCHIVED
          example: PUBLISHED
        categoryId:
          type: integer
          format: int32
          description: Quiz category ID
        attemptsTotalMin:
          type: integer
          format: int32
          description: Minimum total attempts count
        attemptsTotalMax:
          type: integer
          format: int32
          description: Maximum total attempts count
        attemptsSubmittedMin:
          type: integer
          format: int32
          description: Minimum submitted attempts count
        attemptsSubmittedMax:
          type: integer
          format: int32
          description: Maximum submitted attempts count
        questionsTotalMin:
          type: integer
          format: int32
          description: Minimum total questions count
        questionsTotalMax:
          type: integer
          format: int32
          description: Maximum total questions count
        avgDurationMin:
          type: number
          description: Minimum average quiz duration in seconds
        avgDurationMax:
          type: number
          description: Maximum average quiz duration in seconds
        estimatedDurationMin:
          type: integer
          format: int32
          description: Minimum estimated quiz duration in seconds
        estimatedDurationMax:
          type: integer
          format: int32
          description: Maximum estimated quiz duration in seconds
    DeleteAttemptsRequest:
      type: object
      description: Request payload for deleting selected attempts
      properties:
        attemptIds:
          type: array
          description: Attempt IDs to remove
          example:
          - 1
          - 2
          items:
            type: integer
            format: int32
          minItems: 1
        confirm:
          type: boolean
          description: Confirmation flag. Must be true to perform deletion.
          example: true
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    locale:
      type: apiKey
      description: "Locale, e.g. en, ru, en-US"
      name: Accept-Language
      in: header
